<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>üéÑ A Special Christmas Invitation</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#fff7f4;
  --card:#ffffff;
  --accent:#f3a6b8;
  --accent2:#a7d7c5;
  --text:#5a4b4b;
  --soft:#f9e7ec;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:'Quicksand',sans-serif;
  background:linear-gradient(180deg,var(--bg),#fff);
  color:var(--text);
  min-height:100vh;
  overflow:hidden;
}

/* ===== CANVAS ===== */
canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:-1;
}

/* ===== ENVELOPE ===== */
#envelope-screen{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(180deg,#fff7f4,#fff);
  z-index:10;
}

.envelope-wrap{
  text-align:center;
}

.envelope{
  width:260px;
  height:170px;
  background:#fff;
  border-radius:14px;
  position:relative;
  box-shadow:0 20px 40px rgba(0,0,0,.12);
  cursor:pointer;
}

.flap{
  position:absolute;
  inset:0;
  background:var(--accent);
  clip-path:polygon(0 0,100% 0,50% 55%);
  transform-origin:top;
  transition:transform 1s ease;
}

.envelope.open .flap{
  transform:rotateX(180deg);
}

.envelope-text{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:600;
}

#envelope-screen small{
  display:block;
  margin-top:16px;
  opacity:.7;
}

/* ===== MAIN ===== */
.container{
  display:none;
  min-height:100vh;
  align-items:center;
  justify-content:center;
  padding:24px 16px;
}

.card{
  width:100%;
  max-width:420px;
  background:var(--card);
  border-radius:28px;
  padding:32px 24px 36px;
  box-shadow:0 24px 48px rgba(0,0,0,.1);
  text-align:center;
  animation:fadeUp .9s ease forwards;
}

h1{
  font-family:'Poppins';
  font-weight:500;
  font-size:1.15rem;
  margin-bottom:16px;
}

.typing{
  min-height:88px;
  font-size:.95rem;
  line-height:1.75;
  margin-bottom:22px;
}

.typing::after{
  content:"|";
  animation:blink 1s infinite;
}

@keyframes blink{0%,50%,100%{opacity:1}25%,75%{opacity:0}}

.details{
  background:var(--soft);
  border-radius:18px;
  padding:16px 14px;
  margin:24px 0 22px;
  font-size:.9rem;
  line-height:1.7;
  box-shadow:0 4px 12px rgba(0,0,0,.04);
}

.question{
  margin:26px 0 18px;
  font-weight:600;
  font-size:.95rem;
}

.countdown{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
  margin-bottom:22px;
}

.time-box{
  background:#fff;
  border-radius:14px;
  padding:12px 6px;
  box-shadow:0 6px 14px rgba(0,0,0,.06);
}

.num{
  font-family:'Poppins';
  font-size:1.15rem;
  color:var(--accent);
}

.label{
  font-size:.65rem;
  opacity:.65;
}

.buttons{
  display:flex;
  gap:14px;
  justify-content:center;
  margin-top:22px;
}

button{
  border:none;
  padding:14px 20px;
  border-radius:999px;
  font-family:'Poppins';
  background:var(--accent);
  color:#fff;
  cursor:pointer;
  min-width:120px;
}

button.alt{background:var(--accent2)}

.confirm{
  display:none;
  margin-top:22px;
  animation:fadeUp .8s ease forwards;
}

.music{
  position:fixed;
  bottom:18px;
  right:18px;
  background:#fff;
  border-radius:999px;
  padding:10px 14px;
  box-shadow:0 8px 18px rgba(0,0,0,.12);
  cursor:pointer;
  font-size:.85rem;
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(18px)}
  to{opacity:1}
}
</style>
</head>
<body>

<canvas id="snow"></canvas>

<!-- ENVELOPE -->
<div id="envelope-screen">
  <div class="envelope-wrap">
    <div class="envelope" onclick="openLetter()">
      <div class="flap"></div>
    </div>
  </div>
</div>

<!-- MAIN -->
<div class="container" id="main">
  <div class="card">
    <h1>üéÑ A Special Christmas Invitation üéÑ</h1>
    <div class="typing" id="typing"></div>

    <div class="details">
      üìÖ December 24, 2025<br/>
      ‚è∞ 6:30 PM<br/>
      üìç ONGI JJAJANG
    </div>

    <div class="question">Would you like to spend Christmas with me? üíñ</div>

    <div class="countdown">
      <div class="time-box"><div class="num" id="d">0</div><div class="label">Days</div></div>
      <div class="time-box"><div class="num" id="h">0</div><div class="label">Hours</div></div>
      <div class="time-box"><div class="num" id="m">0</div><div class="label">Minutes</div></div>
      <div class="time-box"><div class="num" id="s">0</div><div class="label">Seconds</div></div>
    </div>

    <div class="buttons">
      <button onclick="accept()">Yes, I'd love to üíï</button>
      <button class="alt" onclick="accept()">Of course babi üéÅ</button>
    </div>

    <div class="confirm" id="confirm">
      ‚ú® I can‚Äôt wait to make this Christmas magical together ‚ú®
    </div>
  </div>
</div>

<audio id="music" loop>
  <source src="music/christmas.mp3" type="audio/mpeg">
</audio>

<div class="music" onclick="toggleMusic(this)">üîá Music</div>

<script>
/* ===== OPEN LETTER ===== */
const envelopeScreen = document.getElementById("envelope-screen");
const mainScreen = document.getElementById("main");
const music = document.getElementById("music");
let playing=false;

function openLetter(){
  document.querySelector(".envelope").classList.add("open");

  setTimeout(()=>{
    envelopeScreen.style.display="none";
    mainScreen.style.display="flex";
    startTyping();
    startCountdown();

    music.muted=false;
    music.play();
    playing=true;
    document.querySelector(".music").textContent="üîä Music";
  },900);
}

/* ===== MUSIC ===== */
function toggleMusic(el){
  playing=!playing;
  music.muted=!playing;
  if(playing) music.play();
  el.textContent=playing?"üîä Music":"üîá Music";
}

/* ===== TYPING ===== */
const text = "This Christmas Eve, I‚Äôd love to spend a quiet, cozy evening with you. Being with you already feels like Christmas to me. Wishing you the most magical holiday ‚ú®";
let ti=0;
function startTyping(){
  const el=document.getElementById("typing");
  (function type(){
    if(ti<text.length){
      el.innerHTML+=text.charAt(ti++);
      setTimeout(type,36);
    }
  })();
}

/* ===== COUNTDOWN (FIXED) ===== */
const target = new Date(2025,11,24,18,30,0).getTime();
const dEl=document.getElementById("d");
const hEl=document.getElementById("h");
const mEl=document.getElementById("m");
const sEl=document.getElementById("s");

function startCountdown(){
  setInterval(()=>{
    const diff = target - Date.now();
    if(diff<=0) return;
    dEl.textContent=Math.floor(diff/86400000);
    hEl.textContent=Math.floor(diff/3600000)%24;
    mEl.textContent=Math.floor(diff/60000)%60;
    sEl.textContent=Math.floor(diff/1000)%60;
  },1000);
}

/* ===== ACCEPT ===== */
function accept(){
  document.getElementById("confirm").style.display="block";
}

/* ===== SNOW + HEART ===== */
const canvas=document.getElementById("snow");
const ctx=canvas.getContext("2d");
let w,h,particles=[];
function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight}
addEventListener("resize",resize);resize();

class Particle{
  constructor(type="snow"){this.type=type;this.reset()}
  reset(){
    this.x=Math.random()*w;
    this.y=Math.random()*-h;
    this.size=this.type==="heart"?Math.random()*3+3:Math.random()*3+1;
    this.speed=Math.random()*0.8+0.4;
    this.swing=Math.random()*Math.PI*2;
    this.rotate=Math.random()*Math.PI*2;
    this.rs=Math.random()*0.01-0.005;
    this.blur=Math.random()*2;
    this.o=Math.random()*0.5+0.5;
  }
  update(){
    this.y+=this.speed;
    this.swing+=0.01;
    this.rotate+=this.rs;
    this.x+=Math.sin(this.swing)*0.4;
    if(this.y>h+10)this.reset();
  }
  draw(){
    ctx.save();
    ctx.translate(this.x,this.y);
    ctx.rotate(this.rotate);
    ctx.globalAlpha=this.o;
    ctx.filter=`blur(${this.blur}px)`;
    if(this.type==="heart"){
      ctx.fillStyle="rgba(243,166,184,.8)";
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.bezierCurveTo(-5,-5,-10,2,0,10);
      ctx.bezierCurveTo(10,2,5,-5,0,0);
      ctx.fill();
    }else{
      ctx.fillStyle="#fff";
      ctx.beginPath();
      ctx.arc(0,0,this.size,0,Math.PI*2);
      ctx.fill();
    }
    ctx.restore();
  }
}

for(let i=0;i<120;i++)particles.push(new Particle("snow"));
for(let i=0;i<18;i++)particles.push(new Particle("heart"));

(function animate(){
  ctx.clearRect(0,0,w,h);
  particles.forEach(p=>{p.update();p.draw()});
  requestAnimationFrame(animate);
})();
</script>
</body>
</html>
